{"ts":1351335901793,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var Game = {};\r\n\r\nGame.fps = 50;\r\n\r\n\r\n\r\n//game.context = current canvas\r\n\r\nGame.initialize = function() {\r\n  this.entities = [];  // everything goes here except the hero\r\n  this.Hero =[];\r\n  this.CurrentHero;\r\n  this.context = document.getElementById(\"viewport\").getContext(\"2d\");\r\n  this.collision = new ColDwall();\r\n  this.spriteDB = new SpriteDB();\r\n  this.score = 0;\r\n};\r\n\r\nGame.draw = function() {\r\n  this.context.fillStyle = '#d0e7f9';  // draw the background color\r\n  this.context.fillRect(0, 0, Game.context.canvas.width, Game.context.canvas.height);\r\n  \r\n  for (var i=0; i < this.entities.length; i++) {\r\n    this.entities[i].draw(this.context);\r\n  }\r\n  \r\n\r\n  this.Hero[0].draw(this.context);\r\n  Game.addWave();\r\n  Game.getScore();\r\n  \r\n  \r\n};\r\n\r\nGame.update = function() {\r\n\tGame.checkCollision();\r\n  for (var i=0; i < this.entities.length; i++) {\r\n    this.entities[i].update();\r\n  }\r\n  this.Hero[0].update();\r\n  \r\n\r\n\r\n};\r\n\r\nGame.addEventListener = function() {\r\n    window.addEventListener('keyup', function(event) { Game.CurrentHero.Movement.keyBoard.onKeyup(event); }, false);  //ugly ... cloud be better .. Optimize later\r\n    window.addEventListener('keydown', function(event) { Game.CurrentHero.Movement.keyBoard.onKeydown(event); }, false);\r\n};\r\n\r\nGame.addCloud = function() {\r\n  Game.entities.push(new Cloud());\r\n};\r\n\r\nGame.addHero = function() {\r\n  Game.Hero.push(new Happy());\r\n    this.CurrentHero = this.Hero[0];\r\n};\r\n\r\nGame.addFish = function() {\r\n  Game.entities.push(new Fish());\r\n};\r\n\r\nGame.addEnemy = function() {\r\n  Game.entities.push(new Enemy());\r\n};\r\n\r\nGame.addWave = function(){\r\n  this.context.fillStyle = '#1C6BA0';  // draw the sky color\r\n  this.context.fillRect(0, Game.context.canvas.height - 75, 1000 , 300 );\r\n \t\r\n}\r\n\r\n\r\nGame.checkCollision = function(){\r\n\tfor (var i=0; i < this.Hero.length; i++) {\r\n           for (var j=0; j < this.entities.length; j++)  {\r\n              if( this.collision.areColliding(this.Hero[i], this.entities[j])) {\r\n\t\t\t\t\tthis.entities[j].touchCloud();\r\n               \r\n              }\r\n            };\r\n          };\r\n};\r\n\r\nGame.getScore = function () \r\n{\r\n\tthis.context.fillStyle = \"black\";\r\n\tthis.context.font = \"24px Helvetica\";\r\n\tthis.context.textAlign = \"left\";\r\n\tthis.context.textBaseline = \"top\";\r\n\tthis.context.fillText(\"Score : \" + this.score, 850, 30);\r\n};\r\n"]],"start1":0,"start2":0,"length1":0,"length2":2334}]],"length":2334}
{"contributors":[],"silentsave":false,"ts":1352980741391,"patch":[[{"diffs":[[0,"}, false);\r\n"],[1,"   \r\n   \r\n   //mobile \r\n   document.body.addEventListener('touchmove', function(event) {event.preventDefault();}, false); // prevent scrolling\r\n   window.addEventListener('touchmove', function(event) { renderTouches(event.touches);}, false);\r\n    window.addEventListener('keyup', function(event) { Game.CurrentHero.Movement.keyBoard.onKeyup(event); }, false);  \r\n    window.addEventListener('keydown', function(event) { Game.CurrentHero.Movement.keyBoard.onKeydown(event); }, false);\r\n    \r\n"],[0,"};\r\n\r\nGame.a"]],"start1":1248,"start2":1248,"length1":24,"length2":515}]],"length":2825,"saved":false}
{"ts":1352981399852,"patch":[[{"diffs":[[0,"tListener('keyup"],[1," , touchstart"],[0,"', function(even"]],"start1":992,"start2":992,"length1":32,"length2":45},{"diffs":[[0,"istener('keydown"],[1," , touchend"],[0,"', function(even"]],"start1":1171,"start2":1171,"length1":32,"length2":43},{"diffs":[[0,");\r\n"],[-1,"    window.addEventListener('keyup', function(event) { Game.CurrentHero.Movement.keyBoard.onKeyup(event); }, false);  \r\n    window.addEventListener('keydown', function(event) { Game.CurrentHero.Movement.keyBoard.onKeydown(event); }, false);"],[0,"\r\n  "]],"start1":1523,"start2":1523,"length1":248,"length2":8}]],"length":2609,"saved":false}
{"ts":1352981428283,"patch":[[{"diffs":[[0,"r('keyup"],[1,"'"],[0," , "],[1,"'"],[0,"touchsta"]],"start1":1000,"start2":1000,"length1":19,"length2":21},{"diffs":[[0,"'keydown"],[1,"'"],[0," , "],[1,"'"],[0,"touchend"]],"start1":1181,"start2":1181,"length1":19,"length2":21}]],"length":2613,"saved":false}
{"ts":1352981499294,"patch":[[{"diffs":[[0,"yup'"],[-1," , 'touchstart'"],[0,", fu"]],"start1":1005,"start2":1005,"length1":23,"length2":8},{"diffs":[[0,"own'"],[-1," , 'touchend'"],[0,", fu"]],"start1":1171,"start2":1171,"length1":21,"length2":8},{"diffs":[[0,"ling\r\n  "],[1,"//"],[0," window."]],"start1":1398,"start2":1398,"length1":16,"length2":18},{"diffs":[[0,"alse);\r\n"],[1,"    window.addEventListener('touchstart', function(event) { Game.CurrentHero.Movement.keyBoard.onKeyup(event); }, false);  \r\n    window.addEventListener('touchend', function(event) { Game.CurrentHero.Movement.keyBoard.onKeydown(event); }, false);"],[0,"\r\n    \r\n"]],"start1":1497,"start2":1497,"length1":16,"length2":262}]],"length":2833,"saved":false}
{"ts":1352981912885,"patch":[[{"diffs":[[0,"le \r\n   "],[1,"//"],[0,"document"]],"start1":1279,"start2":1279,"length1":16,"length2":18},{"diffs":[[0,"ouch"],[-1,"start"],[1,"move"],[0,"', f"]],"start1":1537,"start2":1537,"length1":13,"length2":12}]],"length":2834,"saved":false}
{"ts":1352981955271,"patch":[[{"diffs":[[0,"le \r\n   "],[-1,"//"],[0,"document"]],"start1":1279,"start2":1279,"length1":18,"length2":16}]],"length":2832,"saved":false}
{"ts":1352982059569,"patch":[[{"diffs":[[0,"le \r\n   "],[1,"//"],[0,"document"]],"start1":1279,"start2":1279,"length1":16,"length2":18},{"diffs":[[0,"unction(event) {"],[1,"event.preventDefault();"],[0," Game.CurrentHer"]],"start1":1549,"start2":1549,"length1":32,"length2":55}]],"length":2857,"saved":false}
{"ts":1352982368535,"patch":[[{"diffs":[[0,"}, false);\r\n"],[1,"  \r\n"],[0,"    window.a"]],"start1":1495,"start2":1495,"length1":24,"length2":28},{"diffs":[[0,"onKeyup(event); "],[1,"console.log(event.keyCode);"],[0,"}, false);  \r\n  "]],"start1":1628,"start2":1628,"length1":32,"length2":59}]],"length":2888,"saved":false}
{"ts":1352982881062,"patch":[[{"diffs":[[0,"t();"],[-1," Game.CurrentHero.Movement.keyBoard.onKeyup(event); console.log(event.keyCode);"],[1,"function touchMove(event) {\r\n    event.preventDefault();\r\n    Game.Hero[0].x = event.targetTouches[0].pageX - startX;\r\n    Game.Hero[0].y = event.targetTouches[0].pageY - startY;\r\n    event.targetTouches[0].target.style.webkitTransform ='translate(' + Game.Hero[0].x + 'px, ' + Game.Hero[0].y + 'px)';\r\n}"],[0,"}, f"]],"start1":1588,"start2":1588,"length1":87,"length2":312}]],"length":3113,"saved":false}
{"ts":1352983372034,"patch":[[{"diffs":[[0,"geX "],[-1,"- startX"],[0,";\r\n "]],"start1":1696,"start2":1696,"length1":16,"length2":8},{"diffs":[[0,"ageY"],[-1," - startY"],[0,";\r\n "]],"start1":1748,"start2":1748,"length1":17,"length2":8}]],"length":3096,"saved":false}
{"ts":1353023754940,"patch":[[{"diffs":[[0,".onKeyup(event);"],[1," console.log(Game.Hero[0].x); "],[0," }, false);  //u"]],"start1":1063,"start2":1063,"length1":32,"length2":62}]],"length":3126,"saved":false}
{"contributors":[],"silentsave":false,"ts":1353072499099,"patch":[[{"diffs":[[0," \r\n "],[-1,"  \r\n   //mobile \r\n   //document.body.addEventListener('touchmove', function(event) {event.preventDefault();}, false); // prevent scrolling\r\n  // window.addEventListener('touchmove', function(event) { renderTouches(event.touches);}, false);\r\n  \r\n    window.addEventListener('touchmove', function(event) {event.preventDefault();function touchMove(event) {\r\n    event.preventDefault();\r\n    Game.Hero[0].x = event.targetTouches[0].pageX ;\r\n    Game.Hero[0].y = event.targetTouches[0].pageY;\r\n    event.targetTouches[0].target.style.webkitTransform ='translate(' + Game.Hero[0].x + 'px, ' + Game.Hero[0].y + 'px)';\r\n}}, false);  \r\n    window.addEventListener('touchend', function(event) { Game.CurrentHero.Movement.keyBoard.onKeydown(event); }, false"],[1,"jQuery('#viewport').bind('swipeone',log"],[0,");\r\n"]],"start1":1292,"start2":1292,"length1":754,"length2":47}]],"length":2419,"saved":false}
{"ts":1353072966012,"patch":[[{"diffs":[[0,"nd('"],[-1,"swipeone',log);\r\n    "],[1,"tapone',function(event) {  for (var j=0; j < this.entities.length; j++)  {\r\n             \r\n    \t\t\t\tthis.entities[j].touchCloud();\r\n               \r\n              \r\n            }; });\r\n"],[0,"\r\n};"]],"start1":1318,"start2":1318,"length1":29,"length2":192}]],"length":2582,"saved":false}
{"ts":1353074554955,"patch":[[{"diffs":[[0,"event) {"],[1,"\r\n     console.log('test test test');\r\n      "],[0,"  for (v"]],"start1":1339,"start2":1339,"length1":16,"length2":61},{"diffs":[[0,"    "],[-1," \r\n    \t\t\t\t"],[0,"this"]],"start1":1451,"start2":1451,"length1":19,"length2":8},{"diffs":[[0,"Cloud();"],[-1,"\r\n      "],[0,"      "],[-1,"   "],[0,"\r\n      "]],"start1":1477,"start2":1477,"length1":33,"length2":22},{"diffs":[[0,"    "],[-1,"     "],[1,"};"],[0," \r\n   "],[-1," "],[-1,"        };"],[0," });"]],"start1":1497,"start2":1497,"length1":30,"length2":16}]],"length":2591,"saved":false}
{"ts":1353074619729,"patch":[[{"diffs":[[0,"=0; j < "],[-1,"this.entities.length"],[1,"250"],[0,"; j++)  "]],"start1":1404,"start2":1404,"length1":36,"length2":19}]],"length":2574,"saved":false}
{"ts":1353074731605,"patch":[[{"diffs":[[0,"    "],[-1," for (var j=0; j < 250; j++)  {\r\n            this.entities[j].touchCloud();      "],[1,"this.context.fillStyle = '#444223';  // draw the background color\r\n        this.context.fillRect(0, 0, Game.context.canvas.width, Game.context.canvas.height);"],[0,"\r\n  "]],"start1":1389,"start2":1389,"length1":89,"length2":166},{"diffs":[[0,"    "],[-1," }; "],[0,"\r\n  "]],"start1":1556,"start2":1556,"length1":12,"length2":8}]],"length":2647,"saved":false}
{"ts":1353074771342,"patch":[[{"diffs":[[0,"core = 0;\r\n}"],[1,"()"],[0,";\r\n\r\nGame.dr"]],"start1":361,"start2":361,"length1":24,"length2":26}]],"length":2649,"saved":false}
{"ts":1353074806611,"patch":[[{"diffs":[[0," = 0;\r\n}"],[-1,"()"],[0,";\r\n\r\nGam"]],"start1":365,"start2":365,"length1":18,"length2":16}]],"length":2647,"saved":false}
{"ts":1353074841674,"patch":[[{"diffs":[[0,"Dwall();"],[1,"  // collision detection engine -> will need to be improved later"],[0,"\r\n  this"]],"start1":308,"start2":308,"length1":16,"length2":81}]],"length":2712,"saved":false}
{"ts":1353074852896,"patch":[[{"diffs":[[0,"iteDB();"],[1,"  // sprite sheet manager"],[0,"\r\n  this"]],"start1":408,"start2":408,"length1":16,"length2":41}]],"length":2737,"saved":false}
{"ts":1353074936860,"patch":[[{"diffs":[[0,"');\r\n       "],[-1,"this"],[1,"Game"],[0,".context.fil"]],"start1":1471,"start2":1471,"length1":28,"length2":28},{"diffs":[[0,"        "],[-1,"this"],[1,"Game"],[0,".context"]],"start1":1550,"start2":1550,"length1":20,"length2":20}]],"length":2737,"saved":false}
{"ts":1353075020114,"patch":[[{"diffs":[[0,"= '#"],[-1,"444223"],[1,"00000"],[0,"';  "]],"start1":1506,"start2":1506,"length1":14,"length2":13},{"diffs":[[0,"s.height);\r\n"],[1,"        \r\n         for (var j=0; j < Game.entities.length; j++)  {\r\n            \r\n    \t\t\t\tGame.entities[j].touchCloud();\r\n\r\n            };\r\n       \r\n"],[0,"       \r\n   "]],"start1":1630,"start2":1630,"length1":24,"length2":173}]],"length":2885,"saved":false}
{"contributors":[],"silentsave":false,"ts":1353107762651,"patch":[[{"diffs":[[0,"= '#"],[-1,"00000"],[1,"ffffff"],[0,"';  "]],"start1":1506,"start2":1506,"length1":13,"length2":14},{"diffs":[[0,"          \r\n"],[-1,""],[0,"    \t\t\t\tGame"]],"start1":1713,"start2":1713,"length1":24,"length2":24},{"diffs":[[0,"d();\r\n\r\n"],[1,"            };\r\n       \r\n       \r\n    });\r\n    \r\n jQuery('#viewport').bind('tapone',function(event) {\r\n     console.log('test test test');\r\n       Game.context.fillStyle = '#00000';  // draw the background color\r\n        Game.context.fillRect(0, 0, Game.context.canvas.width, Game.context.canvas.height);\r\n        \r\n         for (var j=0; j < Game.entities.length; j++)  {\r\n            \r\n        \t\t\tGame.entities[j].touchCloud();\r\n\r\n"],[0,"        "]],"start1":1759,"start2":1759,"length1":16,"length2":449}]],"length":3319,"saved":false}
{"ts":1353107915015,"patch":[[{"diffs":[[0,"entities[j]."],[-1,"touchCloud()"],[1,"color = {  one:255,two:255,trois:255}"],[0,";\r\n\r\n       "]],"start1":2171,"start2":2171,"length1":36,"length2":61}]],"length":3344,"saved":false}
{"ts":1353107939685,"patch":[[{"diffs":[[0,"iewport').bind('"],[-1,"tapon"],[1,"shak"],[0,"e',function(even"]],"start1":1827,"start2":1827,"length1":37,"length2":36}]],"length":3343,"saved":false}
{"ts":1353107951582,"patch":[[{"diffs":[[0,"est "],[-1,"test');\r\n       Game.context.fillStyle = '#00000';  // draw the background color\r\n        Game.context.fillRect(0, 0, Game.context.canvas.width, Game.context.canvas.height);\r\n        "],[1,"shake');\r\n"],[0,"\r\n  "]],"start1":1893,"start2":1893,"length1":191,"length2":18}]],"length":3170,"saved":false}
{"ts":1353108047813,"patch":[[{"diffs":[[0,").bind('"],[-1,"shake"],[1,"taptwo"],[0,"',functi"]],"start1":1835,"start2":1835,"length1":21,"length2":22}]],"length":3171,"saved":false}
{"ts":1353108151972,"patch":[[{"diffs":[[0,"nd('"],[-1,"taptwo"],[1,"shakeleftright"],[0,"',fu"]],"start1":1839,"start2":1839,"length1":14,"length2":22}]],"length":3179,"saved":false}
{"ts":1353108205011,"patch":[[{"diffs":[[0,"nd('"],[-1,"shakeleftright"],[1,"taptwo"],[0,"',fu"]],"start1":1839,"start2":1839,"length1":22,"length2":14}]],"length":3171,"saved":false}
{"ts":1353127787709,"patch":[[{"diffs":[[0,"nd('"],[-1,"taptwo"],[1,"swipeone"],[0,"',fu"]],"start1":1839,"start2":1839,"length1":14,"length2":16}]],"length":3173,"saved":false}
{"ts":1353128093671,"patch":[[{"diffs":[[0,"st test');\r\n"],[1,"     event.preventDefault();\r\n"],[0,"       Game."]],"start1":1464,"start2":1464,"length1":24,"length2":54},{"diffs":[[0,"hake');\r"],[1,"\n     event.preventDefault();\r"],[0,"\n\r\n     "]],"start1":1931,"start2":1931,"length1":16,"length2":46}]],"length":3233,"saved":false}
{"ts":1353128175305,"patch":[[{"diffs":[[0,"(event);"],[1," event.preventDefault();"],[0," console"]],"start1":1161,"start2":1161,"length1":16,"length2":40}]],"length":3257,"saved":false}
{"ts":1353128316869,"patch":[[{"diffs":[[0,"nction(event) { "],[-1,"Game"],[1,"event.preventDefault(); "],[0,".CurrentHero.Mov"]],"start1":1103,"start2":1103,"length1":36,"length2":56},{"diffs":[[0,"nt);"],[-1," event.preventDefault(); console.log(Game.Hero[0].x); "],[0," }, "]],"start1":1185,"start2":1185,"length1":62,"length2":8},{"diffs":[[0,"vent) { "],[-1,"Game"],[1,"event.preventDefault(); "],[0,".Current"]],"start1":1297,"start2":1297,"length1":20,"length2":40},{"diffs":[[0,"nKeydown(event);"],[1," "],[0," }, false);\r\n   "]],"start1":1361,"start2":1361,"length1":32,"length2":33}]],"length":3244,"saved":false}
{"ts":1353128329339,"patch":[[{"diffs":[[0,"eventDefault(); "],[1,"Game"],[0,".CurrentHero.Mov"]],"start1":1127,"start2":1127,"length1":32,"length2":36},{"diffs":[[0,"ault(); "],[1,"Game"],[0,".Current"]],"start1":1325,"start2":1325,"length1":16,"length2":20}]],"length":3252,"saved":false}
{"ts":1353128369146,"patch":[[{"diffs":[[0,"e = 0;\r\n"],[1,"  this.paused = false;\r\n"],[0,"};\r\n\r\nGa"]],"start1":454,"start2":454,"length1":16,"length2":40}]],"length":3276,"saved":false}
{"ts":1353129109359,"patch":[[{"diffs":[[0,"\n  this."],[-1,"p"],[1,"isP"],[0,"aused = "]],"start1":461,"start2":461,"length1":17,"length2":19}]],"length":3278,"saved":false}
{"ts":1353130632082,"patch":[[{"diffs":[[0,"se);\r\n  "],[1,"\r\n  \r\n  $(document).keyup(function(e) {\r\n\r\n  if (e.keyCode == 27) { \r\n      \r\n      // esc\r\n  });\r\n "],[0," \r\n jQue"]],"start1":1419,"start2":1419,"length1":16,"length2":116}]],"length":3378,"saved":false}
{"ts":1353134447325,"patch":[[{"diffs":[[0,"\r\n  "],[-1,"$(document"],[1," jQuery('#viewport'"],[0,").ke"]],"start1":1431,"start2":1431,"length1":18,"length2":27}]],"length":3517,"saved":false}
{"ts":1353134561671,"patch":[[{"diffs":[[0,"n(e) {\r\n"],[1,"          console.log('esc pressed');"],[0,"\r\n    if"]],"start1":1469,"start2":1469,"length1":16,"length2":53}]],"length":3554,"saved":false}
{"ts":1353134688832,"patch":[[{"diffs":[[0,"\n  \r\n   "],[-1,"jQuery('#viewport')"],[1,"document"],[0,".keyup(f"]],"start1":1428,"start2":1428,"length1":35,"length2":24}]],"length":3543,"saved":false}
{"ts":1353134728882,"patch":[[{"diffs":[[0,"\n  \r\n   "],[1,"$("],[0,"document"],[1,")"],[0,".keyup(f"]],"start1":1428,"start2":1428,"length1":24,"length2":27}]],"length":3546,"saved":false}
{"ts":1353134774624,"patch":[[{"diffs":[[0," pressed"],[-1,"'"],[1," '+Game.isPaused "],[0,");\r\n    "]],"start1":1495,"start2":1495,"length1":17,"length2":33}]],"length":3562,"saved":false}
{"ts":1353136430611,"patch":[[{"diffs":[[0,"    \t\t\t\t"],[1,"//"],[0,"Game.ent"]],"start1":2084,"start2":2084,"length1":16,"length2":18}]],"length":3564,"saved":false}
{"ts":1353136470415,"patch":[[{"diffs":[[0,"ed '+Game.is"],[1," "],[0,"Paused );\r\n "]],"start1":1501,"start2":1501,"length1":24,"length2":25},{"diffs":[[0,"    \t\t\t\t"],[-1,"//"],[0,"Game.ent"]],"start1":2085,"start2":2085,"length1":18,"length2":16}]],"length":3563,"saved":false}
{"ts":1353136485332,"patch":[[{"diffs":[[0,"+Game.is"],[-1," "],[0,"Paused )"]],"start1":1505,"start2":1505,"length1":17,"length2":16}]],"length":3562,"saved":false}
{"ts":1353137948741,"patch":[[{"diffs":[[0,"se);\r\n  \r\n  "],[1," jQuery('#viewport').bind('swipeone',function(event) {\r\n     console.log('test test shake');\r\n     event.preventDefault();\r\n       \r\n       \r\n    });"],[0,"\r\n   $(docum"]],"start1":1419,"start2":1419,"length1":24,"length2":173},{"diffs":[[0,"ction(e) {\r\n"],[1,"        e.preventDefault();\r\n"],[0,"          co"]],"start1":1606,"start2":1606,"length1":24,"length2":53}]],"length":3740,"saved":false}
{"ts":1353137963268,"patch":[[{"diffs":[[0,"iewport').bind('"],[-1,"swipeon"],[1,"tapthre"],[0,"e',function(even"]],"start1":1442,"start2":1442,"length1":39,"length2":39}]],"length":3740,"saved":false}
{"ts":1353138074727,"patch":[[{"diffs":[[0,"ault();\r\n   "],[1,"\r\n    if ( false == Game.isPaused )\r\n            Game.isPaused = true;       \r\n    else\r\n         Game.isPaused = false;  "],[0,"    \r\n      "]],"start1":1546,"start2":1546,"length1":24,"length2":146},{"diffs":[[0,"   });\r\n"],[1,"    \r\n"],[0,"   $(doc"]],"start1":1696,"start2":1696,"length1":16,"length2":22}]],"length":3868,"saved":false}
{"ts":1353138226146,"patch":[[{"diffs":[[0,"tapt"],[-1,"hree"],[1,"wo"],[0,"',fu"]],"start1":1458,"start2":1458,"length1":12,"length2":10}]],"length":3866,"saved":false}
{"ts":1353138291098,"patch":[[{"diffs":[[0,"d('s"],[-1,"wipeon"],[1,"hak"],[0,"e',f"]],"start1":2503,"start2":2503,"length1":14,"length2":11}]],"length":3863,"saved":false}
