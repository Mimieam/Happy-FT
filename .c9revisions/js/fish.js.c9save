{"ts":1351338297745,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function Fish() {\r\n    'use strict';\r\n\tthis.img = new Image();\r\n\tthis.img.src = 'img/fishF.png';\r\n\tthis.w = 40;\r\n\tthis.h = 40;\r\n\tthis.x = Math.floor(Math.random() * (Game.context.canvas.width - this.w));\r\n\tthis.y = (Game.context.canvas.height - this.h);\r\n\tthis.intensity = Math.random()/2;\r\n\tthis.velocity = 1 ;  // move in only 1 direction :D\r\n\tthis.start = { // sets the start postions of our source\r\n        //starting coordonate for the jumping animation\r\n  \t    rX: 0, \r\n        rY: 0, \r\n\r\n\t\tX: 0,\r\n\t\tY:0\r\n\t\t\r\n      };\r\n\t this.jmpHeight = Math.floor(Math.random() * (Game.context.canvas.height - this.h));\r\n\t this.JumpingAnim = new SpriteManager(new AnimationData(Game.spriteDB.base['Fish_THROW'],\r\n\t\t{\r\n\t\t  repeats: true,\r\n\t\t  keyframe: 0\r\n\t\t}\r\n\t));\r\n\t\t\r\n};\r\n\r\n/* Fish.prototype.chooseAnimation = function() {\r\n\tif (this.y >= this.jmpHeight ) {  // going up\r\n\t\t\tthis.start.X = this.JumpingAnim.animation.frames[0].x;\r\n\t\t\tthis.start.Y = this.JumpingAnim.animation.frames[0].y;\r\n\t\t\t//console.log(\" FISH going UP\");\r\n\t}else if (this.y <= this.jmpHeight ) {  // going down\r\n\t\t\tthis.start.X = this.JumpingAnim.xPos \r\n\t\t\tthis.start.Y = this.JumpingAnim.yPos\r\n\t\t\t\r\n\t\t\t//console.log(\" FISH going DOWN\");\r\n\t}\r\n};\r\n */\r\n\r\nFish.prototype.draw = function(context) {\r\n    'use strict';\r\n\t//this.chooseAnimation();\r\n\tcontext.drawImage(this.img, this.JumpingAnim.frame.x, this.JumpingAnim.frame.y, this.w ,this.h, this.x, this.y,this.w ,this.h );\t\r\n};\r\n\r\nFish.prototype.update = function(){\t\r\n\t\tthis.JumpingAnim.update(60);\t\r\n\t// add some variability in the speed depending on the jmpHeight\r\n\t\t\t\t  // This definitly need to be improved ... way to ugly and messy\r\n\t\tif (this.y > Game.context.canvas.height + this.h) \r\n\t\t  {\r\n\t\t\tthis.velocity = 1;\r\n\t\t\t//console.log(\"initial state: \"+ this.y);\r\n\t\t\tthis.y  = (Game.context.canvas.height - this.h);\r\n\t\t\tthis.x = Math.floor(Math.random() * (Game.context.canvas.width - this.w));\r\n\t\t\tthis.jmpHeight = Math.floor(Math.random() * (Game.context.canvas.height - this.h));\r\n\t\t  } \r\n\t\t  else if (this.y >= this.jmpHeight ) {  // going up\r\n\t\t\tthis.y  -= this.velocity *Math.floor(Math.random() * 10); \r\n\t\t\tthis.x += 3;\r\n\t\t\t//console.log(\" y <= jH \", this.jmpHeight , \" y : \", this.y);\r\n\t\t  }else if (this.y <= this.jmpHeight ) {  // going down\r\n\t\t  //add rotation here later for polishing\r\n\t\t  this.x += 3;\r\n\t\t\tthis.y  += this.velocity *3;\r\n\t\t\tthis.jmpHeight += this.velocity *3;\r\n\t\t\t//console.log(\" y >= jH \", this.jmpHeight , \" y : \", this.y);\r\n\t\t  }\r\n\t\r\n\r\n};\r\n\r\n\r\nFish.prototype.touchCloud = function() {\r\n\t\tconsole.log(\"a Fish as been captured\");\r\n\t\tGame.score ++;\r\n\t\t\tthis.x = Math.floor(Math.random() * (Game.context.canvas.width - this.w));\r\n\t\t\tthis.y = (Game.context.canvas.height - this.h);\r\n\t\r\n};\r\n\r\n\r\n\r\n\r\n "]],"start1":0,"start2":0,"length1":0,"length2":2745}]],"length":2745}
