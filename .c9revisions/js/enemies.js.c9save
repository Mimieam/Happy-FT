{"ts":1351338308799,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"http://www.iguanademos.com/Jare/docs/html5/Lessons/Lesson5/\r\nfunction Enemy() {\r\n    'use strict';\r\n\tthis.img = new Image();\r\n\tthis.img.src = 'img/iliisy.png';\r\n\tthis.Self = new player(this.img);\r\n\tthis.Self.animUpdate = 30;\r\n\tthis.w = 40;\r\n\tthis.h = 40;\r\n\tthis.x = (Game.context.canvas.width - this.w);\r\n\tthis.y = Math.floor(Math.random() * (Game.context.canvas.height - this.h));\r\n\t\r\n\tthis.eps = 10;\r\n\tthis.velocity = 1.5  ; \r\n\tthis.RegisterAnimations();\r\n\tthis.animPlayer = new SpriteManager(this.Self.animSet.FORWARD);  //default animation\r\n\r\n\r\n};\r\nEnemy.prototype.RegisterAnimations = function(){\r\n\tthis.Self.addAnimation( 'FORWARD', \t \r\n\tnew AnimationData(Game.spriteDB.base['Enemie1_FORWARD'],\r\n\t\t\t{\r\n\t\t\t  repeats: true,\r\n\t\t\t  keyframe: 0\r\n\t\t\t}\r\n\t\t)\t\r\n\t);\r\n\r\n\r\n\tthis.Self.addAnimation( 'BACKWARD', \r\n\t new AnimationData(Game.spriteDB.base['Enemie1_BACKWARD']\r\n\t\t\t,\r\n\t\t\t{\r\n\t\t\t  repeats: true,\r\n\t\t\t  keyframe: 0\r\n\t\t\t}\r\n\t\t  )\t\r\n\t);\r\n}\r\n\r\nEnemy.prototype.chooseAnimation = function() {\r\n\t\r\n};\r\n\r\n\r\nEnemy.prototype.draw = function(context) {\r\n    'use strict';\r\n\t//this.chooseAnimation();\r\n\tcontext.drawImage(this.img, this.animPlayer.frame.x, this.animPlayer.frame.y , this.animPlayer.frame.w ,this.animPlayer.frame.h, this.x,this.y,this.animPlayer.frame.w ,this.animPlayer.frame.h );\r\n\t\t\r\n\t/* \tcontext.fillStyle = \"blue\"; \r\n\t\tcontext.fillRect(this.animPlayer.frame.x, this.animPlayer.frame.y, this.animPlayer.frame.w, this.animPlayer.frame.h);\r\n\t\t */\r\n\r\n};\r\n\r\nEnemy.prototype.update = function(){\t\r\n\t\tthis.animPlayer.update(60);\t\r\n\t\tthis.updatePos();\r\n};\r\n\r\n\r\nEnemy.prototype.touchCloud = function() {\r\n\t\tconsole.log(\"an enemie has been touched\");\r\n\t\tGame.score ++;\r\n\r\n\t\t\t\r\n\tthis.x = (Game.context.canvas.width - this.w);\r\n\tthis.y = Math.floor(Math.random() * (Game.context.canvas.height - this.h));\r\n\t\r\n};\r\n\r\n\r\nEnemy.prototype.updatePos = function(){\r\n\tvar biz = 5\r\n\r\n\tif (this.x<Game.Hero[0].x) {\r\n\tthis.x += this.velocity ;\r\n\tthis.animPlayer.SetCurrentAnimation(this.Self.animSet.BACKWARD);\r\n\t}; \r\n\t\r\n\tif (this.x>Game.Hero[0].x) {\r\n\tthis.x -= this.velocity;\r\n\tthis.animPlayer.SetCurrentAnimation(this.Self.animSet.FORWARD);\r\n\t}\r\n\t\r\n\t\r\n\tif (this.y<Game.Hero[0].y) {this.y += this.velocity };\r\n\tif (this.y>Game.Hero[0].y) {this.y -= this.velocity};\r\n\t\r\n\t\tif ( this.y < (Game.Hero[0].y + this.eps ) || this.y <(Game.Hero[0].y - this.eps ) ) {\r\n\t\tthis.y += (Math.random() > 0.5 ) ? biz*this.velocity : -biz*this.velocity ;       // oscillation of the enemy\r\n\t\tthis.x += (Math.random() > 0.5 ) ? biz*this.velocity : -biz*this.velocity ; \r\n\t\t}\r\n\t\t\r\n\tif ( this.x < (Game.Hero[0].x + this.eps ) || this.x < (Game.Hero[0].x - this.eps ) ) {\r\n\t\tthis.x += (Math.random() > 0.5 ) ? biz*this.velocity : -biz * this.velocity ;\r\n\t\tthis.y += (Math.random() > 0.5 ) ? biz*this.velocity : -biz*this.velocity ;  \r\n\t\t}\r\n\r\n };\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":2816}]],"length":2816}
{"contributors":[],"silentsave":false,"ts":1352978786878,"patch":[[{"diffs":[[0,"ore "],[-1,"++"],[1,"--"],[0,";\r\n\r"]],"start1":1662,"start2":1662,"length1":10,"length2":10}]],"length":2816,"saved":false}
