{"ts":1351338278524,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function Happy() {\r\n    'use strict';\r\n\tthis.img = new Image();\r\n\tthis.img.src = 'img/HappyF.png';\r\n\tthis.Self = new player(this.img);\r\n\tthis.Self.animUpdate = 30;\r\n\tthis.w = 56;\r\n\tthis.h = 48;\r\n\tthis.x = Math.floor(Math.random() * (Game.context.canvas.width - this.w));\r\n\tthis.y = Math.floor(Math.random() * (Game.context.canvas.height - this.h));\r\n\tthis.intensity = Math.random()/2;\r\n\tthis.velocity = 1 ;  // move in only 1 direction :D\r\n \r\n\tthis.RegisterAnimations();\r\n\r\n\tthis.Movement = new InputManager();\r\n\r\n\tthis.animPlayer = new SpriteManager(this.Self.animSet.FORWARD);  //default animation\r\n\r\n\r\n};\r\nHappy.prototype.RegisterAnimations = function(){\r\n\tthis.Self.addAnimation( 'FORWARD', \t \r\n\tnew AnimationData(Game.spriteDB.base['Happy_FORWARD'],\r\n\t\t{\r\n\t\t  repeats: true,\r\n\t\t  keyframe: 0\r\n\t\t}\r\n\t)\t\r\n);\r\n\r\n\r\nthis.Self.addAnimation( 'BACKWARD', \r\n new AnimationData(Game.spriteDB.base['Happy_BACKWARD']\r\n        ,\r\n        {\r\n          repeats: true,\r\n          keyframe: 0\r\n        }\r\n      )\t\r\n);\r\n\r\nthis.Self.addAnimation( 'FASTFORWARD', \r\n new AnimationData(Game.spriteDB.base['Happy_FASTFORWARD']\r\n,\r\n        {\r\n          repeats: false,\r\n          keyframe: 0\r\n        }\r\n      )\t\r\n);\r\n}\r\n\r\nHappy.prototype.chooseAnimation = function() {\r\n\t /* bind a movement to an animation*/\r\n\t if ( this.Movement.NOINPUT  == true)\r\n\t {\r\n\t\t\tthis.animPlayer.SetCurrentAnimation(this.Self.animSet.FORWARD);\r\n\t\t\tthis.Self.animUpdate = 30;\r\n\t }\r\n\t else if(this.Movement.RIGHT  ) \r\n\t{\r\n\t\tthis.Self.animUpdate = 30;\r\n\t\tthis.animPlayer.SetCurrentAnimation(this.Self.animSet.FORWARD);\r\n\r\n\t\t// console.log(\"Debug Moving right: \"+ this.Movement.RIGHT);\r\n\t}\t\t \r\n\telse if(this.Movement.DOWN)\r\n\t{\r\n\t\t\tthis.Self.animUpdate = 30;\r\n\t\tconsole.log(\"Debug Moving Down: \"+ this.Movement.DOWN);\r\n\t}\t\r\n\telse if(this.Movement.LEFT == true)\r\n\t{\r\n\t\t\tthis.Self.animUpdate = 30;\r\n\t\tthis.animPlayer.SetCurrentAnimation(this.Self.animSet.BACKWARD);\r\n\r\n\t\t// console.log(\"Debug Moving Left: \"+ this.Movement.LEFT);\r\n\t}\r\n\telse if(this.Movement.UP == true)\r\n\t{\r\n\t\t\tthis.Self.animUpdate = 30;\r\n\t\tconsole.log(\"Debug Moving Up: \"+ this.Movement.UP);\r\n\t}\t\r\n\telse if(this.Movement.FORWARDBOOST == true)\r\n\t{\r\n\t\tthis.Self.animUpdate = 30;\r\n\t\tthis.animPlayer.SetCurrentAnimation(this.Self.animSet.FASTFORWARD); \r\n\t\t//this.animPlayer.SetCurrentAnimation(this.animPlayer.defaultAnim); \r\n\t\t\r\n\tthis.Movement.FORWARDBOOST = false;  // stop the animation - the default one will kicked in\r\n\t\r\n\r\n\t}\t\r\n};\r\n\r\n\r\nHappy.prototype.draw = function(context) {\r\n    'use strict';\r\n\t//this.chooseAnimation();\r\n\tcontext.drawImage(this.img, this.animPlayer.frame.x, this.animPlayer.frame.y , this.animPlayer.frame.w ,this.animPlayer.frame.h, this.x,this.y,this.animPlayer.frame.w ,this.animPlayer.frame.h );\r\n\t\t\r\n\t/* \tcontext.fillStyle = \"green\"; \r\n\t\tcontext.fillRect(this.animPlayer.frame.x, this.animPlayer.frame.y, this.animPlayer.frame.w, this.animPlayer.frame.h);\r\n\t\t\r\n */\r\n};\r\n\r\nHappy.prototype.update = function(){\t\r\n\t\tthis.chooseAnimation();\r\n\t\tthis.animPlayer.update(this.Self.animUpdate);\r\n\t\t\r\n\t\t\tif (this.x < Game.context.canvas.width + this.w) {\r\n\t\t\tthis.velocity = 1;\r\n\t\t  } else if (this.x > Game.context.canvas.width + this.w) {\r\n\t\t\tthis.x  = 0 - this.w ;\r\n\t\t  }\r\n\t\t  this.x = this.Movement.updateXpos(this.x,2);\r\n\t\t  this.y = this.Movement.updateYpos(this.y,1);\r\n\t\t  this.Movement.reset();\r\n\t\t\t\r\n};\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":3356}]],"length":3356}
{"contributors":[],"silentsave":false,"ts":1353134597796,"patch":[[{"diffs":[[0,"mUpdate = 30;\r\n\t"],[1,"//"],[0,"\tconsole.log(\"De"]],"start1":1700,"start2":1700,"length1":32,"length2":34},{"diffs":[[0," 30;\r\n\t\t"],[1,"//"],[0,"console."]],"start1":2055,"start2":2055,"length1":16,"length2":18}]],"length":3360,"saved":false}
